# ğŸ§© Flutter é¢è¯•é¢˜åˆé›†ï¼ˆåŸºç¡€ + è¿›é˜¶ + å®æˆ˜ï¼‰

---

## ğŸ§  ä¸€ã€åŸºç¡€ç‰ˆï¼ˆåŸºç¡€ä¸æœºåˆ¶ + çŠ¶æ€ç®¡ç† + æ€§èƒ½ä¼˜åŒ–ï¼‰

### 1ï¸âƒ£ Flutter çš„æ¸²æŸ“æœºåˆ¶æ˜¯æ€æ ·çš„ï¼Ÿ

è¯·æè¿°ä» Widget â†’ Element â†’ RenderObject çš„è¿‡ç¨‹ï¼Œå®ƒä»¬ä¹‹é—´çš„èŒè´£åˆ’åˆ†ä¸ç”Ÿå‘½å‘¨æœŸã€‚  
**è€ƒç‚¹ï¼š**
* Widget æ˜¯ä¸å¯å˜é…ç½®  
* Element æ˜¯ Widget çš„å®ä¾‹åŒ–ä¸æ ‘ç»“æ„  
* RenderObject è´Ÿè´£å¸ƒå±€(Layout)ä¸ç»˜åˆ¶(Paint)  
**ç­”æ¡ˆï¼š**  

> Widget æè¿°ç•Œé¢ç»“æ„ï¼ŒElement ç®¡ç† Widget çš„å®ä¾‹å’ŒçŠ¶æ€ï¼ŒRenderObject æ‰§è¡Œå¸ƒå±€ä¸ç»˜åˆ¶ã€‚Widget æ”¹å˜æ—¶é€šè¿‡ diff æœºåˆ¶æ›´æ–° Element å’Œ RenderObjectã€‚

---

### 2ï¸âƒ£ setState ä¸ºä»€ä¹ˆä¸ä¼šé‡å»ºæ•´ä¸ªç•Œé¢ï¼Ÿ

**è€ƒç‚¹ï¼š**
* Flutter é€šè¿‡ Element æ ‘å¯¹æ¯”æ–°æ—§ Widget  
* åªåˆ·æ–°å—å½±å“çš„èŠ‚ç‚¹  
**ç­”æ¡ˆï¼š**  

> setState åªä¼šè§¦å‘å½“å‰ State å¯¹åº”çš„ Element é‡æ–°æ„å»ºï¼ŒFlutter æ¯”è¾ƒæ–°æ—§ Widget æ ‘ï¼Œä»…æ›´æ–°å·®å¼‚éƒ¨åˆ†ï¼Œä¸ä¼šå…¨é‡é‡å»ºã€‚

---

### 3ï¸âƒ£ StatelessWidget ä¸ StatefulWidget çš„åŒºåˆ«ï¼Ÿ

**è€ƒç‚¹ï¼š**
* StatelessWidgetï¼šæ— çŠ¶æ€  
* StatefulWidgetï¼šæœ‰çŠ¶æ€ã€å¯å˜æ•°æ®  
**ç­”æ¡ˆï¼š**  

> StatelessWidget ä¸ä¿å­˜å†…éƒ¨çŠ¶æ€ï¼Œé€‚åˆé™æ€å†…å®¹ï¼›StatefulWidget ç»´æŠ¤å¯å˜çŠ¶æ€ï¼Œå¦‚åŠ¨ç”»ã€è¾“å…¥ã€ç½‘ç»œæ•°æ®ç­‰ã€‚

---

### 4ï¸âƒ£ Providerã€Riverpodã€Blocã€GetX çš„åŒºåˆ«ï¼Ÿ

**è€ƒç‚¹ï¼š**
* çŠ¶æ€ç®¡ç†æ€æƒ³å’Œé€‚ç”¨åœºæ™¯  
**ç­”æ¡ˆï¼š**  

> Providerï¼šåŸºäº InheritedWidgetï¼Œç®€å•ã€‚  
> Riverpodï¼šæ—  context é™åˆ¶ï¼Œç±»å‹å®‰å…¨ã€‚  
> Blocï¼šäº‹ä»¶é©±åŠ¨ï¼Œé€‚åˆå¤§å‹é¡¹ç›®ã€‚  
> GetXï¼šå“åº”å¼ç¼–ç¨‹ï¼Œè½»é‡ä½†ä¾µå…¥æ€§å¼ºã€‚

---

### 5ï¸âƒ£ InheritedWidget çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ

**è€ƒç‚¹ï¼š**
* ä¸Šä¸‹æ–‡ä¼ é€’å…±äº«æ•°æ®  
* updateShouldNotify æ§åˆ¶ rebuild  
**ç­”æ¡ˆï¼š**  

> InheritedWidget å®ç°è·¨ç»„ä»¶æ•°æ®å…±äº«ï¼›Provider åŸºäºå®ƒå°è£…ï¼Œä½¿ä¾èµ–æ³¨å…¥ä¸æ›´æ–°æ›´ç®€æ´ã€‚

---

### 6ï¸âƒ£ å¦‚ä½•å‡å°‘ Flutter çš„ rebuild æ¬¡æ•°ï¼Ÿ

**è€ƒç‚¹ï¼š**
* const æ„é€   
* æ‹†åˆ† widget  
* å±€éƒ¨ç›‘å¬  
**ç­”æ¡ˆï¼š**  

> ä½¿ç”¨ constã€åˆ†ç¦»ç»„ä»¶ã€Selector/Consumer ç²¾å‡†ç›‘å¬ã€ä½¿ç”¨ RepaintBoundary é™åˆ¶é‡ç»˜èŒƒå›´ã€‚

---

### 7ï¸âƒ£ jankï¼ˆæ‰å¸§ï¼‰äº§ç”Ÿçš„åŸå› å’Œä¼˜åŒ–ï¼Ÿ

**è€ƒç‚¹ï¼š**
* ä¸»çº¿ç¨‹é˜»å¡  
* UI å±‚å¤æ‚åº¦  
* å¼‚æ­¥ä¼˜åŒ–  
**ç­”æ¡ˆï¼š**  

> æ‰å¸§å¤šå› åŒæ­¥ I/O æˆ–å¤æ‚ç»˜åˆ¶å¯¼è‡´ä¸»çº¿ç¨‹è¶… 16msï¼Œå¯é€šè¿‡ compute/Isolate å¼‚æ­¥å¤„ç†ã€ç®€åŒ– UI å±‚çº§ã€ç¼“å­˜å›¾ç‰‡ä¼˜åŒ–ã€‚

---

### 8ï¸âƒ£ Flutter å¦‚ä½•ä¸åŸç”Ÿäº¤äº’ï¼Ÿ

**è€ƒç‚¹ï¼š**
* ä¸‰ç§ Channel  
**ç­”æ¡ˆï¼š**  

> MethodChannelï¼šæ–¹æ³•è°ƒç”¨ã€‚  
> EventChannelï¼šåŸç”Ÿåˆ° Flutter çš„äº‹ä»¶æµã€‚  
> BasicMessageChannelï¼šåŒå‘æ–‡æœ¬æˆ– JSON é€šä¿¡ã€‚

---

### 9ï¸âƒ£ å¤šå¹³å°å·®å¼‚ï¼ˆiOS / Android / Webï¼‰å¦‚ä½•å¤„ç†ï¼Ÿ

**è€ƒç‚¹ï¼š**
* Platform åˆ¤æ–­  
* æŠ½è±¡å°è£…  
**ç­”æ¡ˆï¼š**  

> ä½¿ç”¨ Platform.isIOS / isAndroid åˆ¤æ–­ï¼Œæˆ–é€šè¿‡æŠ½è±¡æ¥å£è°ƒç”¨åŸç”Ÿå®ç°ã€‚å¯ä½¿ç”¨è·¨å¹³å°åº“ç»Ÿä¸€æ¥å£ã€‚

---

### ğŸ”Ÿ Hot Reload ä¸ Hot Restart çš„åŒºåˆ«ï¼Ÿ

**è€ƒç‚¹ï¼š**
* çŠ¶æ€ä¿ç•™ä¸ä¸¢å¤±  
**ç­”æ¡ˆï¼š**  

> Hot Reload ä»…æ›¿æ¢ä»£ç ã€ä¿ç•™çŠ¶æ€ï¼›Hot Restart å®Œå…¨é‡å¯åº”ç”¨ã€æ¸…ç©ºçŠ¶æ€ã€‚å‰è€…é€‚åˆè°ƒ UIï¼Œåè€…é€‚åˆç»“æ„å˜åŠ¨ã€‚

---

## ğŸš€ äºŒã€è¿›é˜¶ç‰ˆï¼ˆæ¸²æŸ“åŸç† + æ€§èƒ½ + å·¥ç¨‹ + åº•å±‚ï¼‰

### 1ï¸âƒ£ Flutter çš„ Frame Pipelineï¼ˆå¸§ç®¡çº¿ï¼‰æµç¨‹ï¼Ÿ

**è€ƒç‚¹ï¼š**
* Build â†’ Layout â†’ Paint â†’ Composite â†’ Rasterize  
**ç­”æ¡ˆï¼š**  

> Flutter æ¯å¸§æ‰§è¡Œï¼šæ„å»º Widget æ ‘ã€å¸ƒå±€ RenderObjectã€ç»˜åˆ¶ Layer æ ‘ã€åˆæˆåˆ° GPU æ¸²æŸ“ã€‚

---

### 2ï¸âƒ£ RenderObject ä¸ CustomPainter çš„åŒºåˆ«ï¼Ÿ

**è€ƒç‚¹ï¼š**
* æ§ä»¶çº§åˆ« vs ç»˜åˆ¶çº§åˆ«  
**ç­”æ¡ˆï¼š**  

> RenderObject å‚ä¸å¸ƒå±€å’Œç»˜åˆ¶ï¼Œæ˜¯åº•å±‚ç»„ä»¶ï¼›CustomPainter ä»…è´Ÿè´£ç»˜åˆ¶ï¼Œä¸å‚ä¸å¸ƒå±€ï¼Œé€‚åˆç»˜å›¾æˆ–è‡ªå®šä¹‰æ•ˆæœã€‚

---

### 3ï¸âƒ£ Flutter çš„ Layer Tree æ˜¯ä»€ä¹ˆï¼Ÿ

**è€ƒç‚¹ï¼š**
* GPU åˆæˆå±‚  
**ç­”æ¡ˆï¼š**  

> Flutter å°† UI æ‹†ä¸ºå¤šä¸ª Layerï¼ˆå›¾ç‰‡ã€æ–‡æœ¬ã€è£å‰ªç­‰ï¼‰ï¼Œåˆæˆåˆ° GPUï¼Œå‡å°‘é‡å¤ç»˜åˆ¶å¹¶æå‡æ€§èƒ½ã€‚

---

### 4ï¸âƒ£ ä¸ºä»€ä¹ˆ Flutter ä½¿ç”¨ Skiaï¼Ÿ

**è€ƒç‚¹ï¼š**
* è·¨å¹³å°ä¸€è‡´æ¸²æŸ“  
**ç­”æ¡ˆï¼š**  

> Skia ä½œä¸º 2D å›¾å½¢å¼•æ“ï¼Œå®ç°ç»Ÿä¸€çš„ç»˜åˆ¶ç»“æœï¼Œç»•è¿‡ç³»ç»Ÿ UI ç»„ä»¶ï¼Œç¡®ä¿è·¨å¹³å°ä¸€è‡´æ€§ã€‚

---

### 5ï¸âƒ£ Flutter çš„ isolate æ˜¯ä»€ä¹ˆï¼Ÿ

**è€ƒç‚¹ï¼š**
* å¤šçº¿ç¨‹æ¨¡å‹  
**ç­”æ¡ˆï¼š**  

> Isolate æ˜¯ Dart çš„ç‹¬ç«‹æ‰§è¡Œå•å…ƒï¼Œä¸å…±äº«å†…å­˜ã€‚å¯ç”¨ compute æˆ–è‡ªå®šä¹‰ isolate å¤„ç†è€—æ—¶ä»»åŠ¡é˜²æ­¢ UI å¡é¡¿ã€‚

---

### 6ï¸âƒ£ Flutter Engine ä¸ Framework çš„å…³ç³»ï¼Ÿ

**è€ƒç‚¹ï¼š**
* åˆ†å±‚æ¶æ„  
**ç­”æ¡ˆï¼š**  

> Framework å±‚ï¼ˆDartï¼‰è´Ÿè´£ Widget ä¸é€»è¾‘ï¼ŒEngine å±‚ï¼ˆC++ï¼‰è´Ÿè´£æ¸²æŸ“ã€æ–‡æœ¬ã€IOã€‚ä¸¤è€…é€šè¿‡ Dart C++ bridge é€šä¿¡ã€‚

---

### 7ï¸âƒ£ Element diff åŸç†ï¼Ÿ

**è€ƒç‚¹ï¼š**
* æŒ‰ Widget ç±»å‹å¯¹æ¯”æ›´æ–°  
**ç­”æ¡ˆï¼š**  

> Flutter æ„å»ºæ–° Widget æ ‘ï¼Œä¸æ—§ Element æ ‘æ¯”è¾ƒï¼šåŒç±»å‹ â†’ æ›´æ–°ï¼›ä¸åŒç±»å‹ â†’ é”€æ¯é‡å»ºã€‚

---

### 8ï¸âƒ£ Flutter å¦‚ä½•æ§åˆ¶å¸§ç‡ä¸æ€§èƒ½ç›‘æ§ï¼Ÿ

**è€ƒç‚¹ï¼š**
* Timelineã€DevToolsã€PerformanceOverlay  
**ç­”æ¡ˆï¼š**  

> ä½¿ç”¨ PerformanceOverlayã€DevTools ç›‘æ§å¸§æ—¶é—´ï¼Œç¡®ä¿å¸§è€—æ—¶ <16msã€‚å¯é€šè¿‡ Timeline åˆ†ææ„å»ºä¸ç»˜åˆ¶è€—æ—¶ã€‚

---

### 9ï¸âƒ£ Flutter ç¼–è¯‘æ¨¡å¼åŒºåˆ«ï¼ˆdebug / profile / releaseï¼‰ï¼Ÿ

**è€ƒç‚¹ï¼š**
* ç¼–è¯‘ä¼˜åŒ–ä¸è°ƒè¯•èƒ½åŠ›  
**ç­”æ¡ˆï¼š**  

> Debugï¼šæ”¯æŒçƒ­é‡è½½ä¸è°ƒè¯•ï¼Œæ€§èƒ½æœ€ä½ï¼›Profileï¼šæ¥è¿‘çœŸå®æ€§èƒ½ï¼›Releaseï¼šAOT ç¼–è¯‘ï¼Œæ€§èƒ½æœ€ä½³ã€‚

---

### ğŸ”Ÿ å¦‚ä½•å®ç° Flutter æ’ä»¶ï¼ˆPluginï¼‰ï¼Ÿ

**è€ƒç‚¹ï¼š**
* MethodChannel é€šä¿¡  
* å¤šå¹³å°å®ç°  
**ç­”æ¡ˆï¼š**  

> é€šè¿‡ `flutter create --template=plugin` åˆ›å»ºæ’ä»¶ï¼›ä½¿ç”¨ MethodChannel è¿æ¥ Dart ä¸åŸç”Ÿï¼Œåˆ†åˆ«å®ç° Androidï¼ˆKotlinï¼‰å’Œ iOSï¼ˆSwiftï¼‰é€»è¾‘ã€‚

---

## ğŸ§° ä¸‰ã€å®æˆ˜ç‰ˆï¼ˆæ—¥å¸¸å¼€å‘é«˜é¢‘é¢˜ï¼‰

### 1ï¸âƒ£ å¦‚ä½•è®¾è®¡ä¸€ä¸ªæ—¥å¿—ä¸Šä¼ åº“ï¼Œä¿è¯æ•°æ®ä¸ä¸¢å¤±ï¼Ÿ

**è€ƒç‚¹ï¼š**
* æœ¬åœ°ç¼“å­˜ + å¼‚æ­¥ä¸Šä¼  + é‡è¯•æœºåˆ¶  
**ç­”æ¡ˆï¼š**  

> æ—¥å¿—å…ˆå†™å…¥æœ¬åœ°æ–‡ä»¶æˆ– SQLiteï¼Œå†å¼‚æ­¥ä¸Šä¼ ï¼›ä¸Šä¼ å¤±è´¥é‡è¯•æˆ–ä¸‹æ¬¡å¯åŠ¨è¡¥å‘ï¼Œä¿è¯ç½‘ç»œå¼‚å¸¸ä¸ä¸¢æ•°æ®ã€‚

---

### 2ï¸âƒ£ å¦‚ä½•å®ç°å®æ—¶æœç´¢ï¼Œç¡®ä¿åªæ˜¾ç¤ºæœ€åä¸€æ¬¡æœç´¢ç»“æœï¼Ÿ

**è€ƒç‚¹ï¼š**
* é˜²æŠ– + Token æœºåˆ¶  
**ç­”æ¡ˆï¼š**  

> ä½¿ç”¨ debounce å»¶è¿Ÿè§¦å‘æœç´¢ï¼›è¯·æ±‚æ—¶æºå¸¦æ—¶é—´æˆ³æˆ– tokenï¼Œåªæ˜¾ç¤ºæœ€æ–°è¯·æ±‚è¿”å›çš„ç»“æœï¼Œæ—§è¯·æ±‚ä¸¢å¼ƒã€‚

æ ¸å¿ƒæ€è·¯è¯´æ˜
* é˜²æŠ–ï¼ˆDebounceï¼‰ï¼šç”¨æˆ·è¾“å…¥æ—¶ï¼Œå»¶è¿Ÿä¸€å®šæ—¶é—´ï¼ˆå¦‚ 300msï¼‰å†è§¦å‘æœç´¢è¯·æ±‚ï¼Œé¿å…è¾“å…¥è¿‡ç¨‹ä¸­é¢‘ç¹è°ƒç”¨æ¥å£ã€‚
* è¿‡æ»¤æ—§è¯·æ±‚ï¼šæ¯æ¬¡è¯·æ±‚æ—¶æºå¸¦å”¯ä¸€æ ‡è¯†ï¼ˆå¦‚æ—¶é—´æˆ³æˆ–é€’å¢ IDï¼‰ï¼Œå“åº”è¿”å›æ—¶æ ¡éªŒæ ‡è¯†æ˜¯å¦ä¸ºæœ€æ–°ï¼Œåªå¤„ç†æœ€æ–°è¯·æ±‚çš„ç»“æœã€‚

åŸç”Ÿ Dart å®ç°ï¼ˆä¸ä¾èµ– RxDartï¼‰
åˆ©ç”¨ TextEditingController ç›‘å¬è¾“å…¥ï¼Œç»“åˆ Timer å®ç°é˜²æŠ–ï¼ŒåŒæ—¶ç”¨å˜é‡è®°å½•æœ€æ–°è¯·æ±‚æ ‡è¯†ã€‚

```
  Timer? _debounceTimer; // é˜²æŠ–å®šæ—¶å™¨
  int _latestRequestId = 0; // æœ€æ–°è¯·æ±‚æ ‡è¯†ï¼ˆé€’å¢ IDï¼‰
```

RxDart æä¾›äº† debounceTime å¤„ç†é˜²æŠ–ï¼ŒswitchMap è‡ªåŠ¨å–æ¶ˆæ—§è¯·æ±‚ï¼ˆåªå¤„ç†æœ€æ–°æµçš„ç»“æœï¼‰ï¼Œæ— éœ€æ‰‹åŠ¨ç®¡ç†è¯·æ±‚æ ‡è¯†ã€‚

```dart
@override
  void initState() {
    super.initState();

    // 1. åˆ›å»ºè¾“å…¥æµï¼šç›‘å¬æ–‡æœ¬å˜åŒ–ï¼Œè½¬æ¢ä¸ºå­—ç¬¦ä¸²æµ
    final inputStream = _searchController.textChanged
        .map((event) => event.text.trim()) // æå–è¾“å…¥æ–‡æœ¬å¹¶å»ç©ºæ ¼
        .debounceTime(const Duration(milliseconds: 300)); // é˜²æŠ–ï¼šå»¶è¿Ÿ 300ms

    // 2. å¤„ç†æµï¼šswitchMap ä¼šè‡ªåŠ¨å–æ¶ˆæ—§è¯·æ±‚ï¼Œåªå¤„ç†æœ€æ–°æµ
    _searchSubscription = inputStream
        .switchMap((query) {
          if (query.isEmpty) {
            // ç©ºè¾“å…¥æ—¶è¿”å›ç©ºç»“æœæµ
            return Stream.value([]);
          }
          // éç©ºè¾“å…¥æ—¶ï¼Œå‘èµ·æœç´¢è¯·æ±‚å¹¶è½¬æ¢ä¸ºæµ
          return Stream.fromFuture(_fetchSearchResults(query));
        })
        .listen((results) {
          // 3. ç›‘å¬ç»“æœå¹¶æ›´æ–° UI
          setState(() => _searchResults = results);
        });
  }
```

---

### 3ï¸âƒ£ GetX 

æ§åˆ¶å™¨ç”Ÿå‘½å‘¨æœŸä¸å¸¸è§é™·é˜±ï¼Ÿ

**è€ƒç‚¹ï¼š**
* æ§åˆ¶å™¨å¤ç”¨ä¸é‡Šæ”¾  
**ç­”æ¡ˆï¼š**  

> ä½¿ç”¨ `Get.put()` æ³¨å†Œåéœ€åœ¨é¡µé¢é”€æ¯æ—¶æ‰‹åŠ¨é‡Šæ”¾ï¼›é¿å…å…¨å±€ Controller è¢«é‡å¤åˆ›å»ºæˆ–æœªé‡Šæ”¾å¯¼è‡´å†…å­˜æ³„æ¼ã€‚  
> å»ºè®®ä½¿ç”¨ `Get.lazyPut()` æˆ– `GetBuilder` æ­é… `init` æ§åˆ¶ç”Ÿå‘½å‘¨æœŸã€‚

**GetXç›¸å…³ä¼˜åŠ¿:**

1. ä¾èµ–æ³¨å…¥
    GetXæ˜¯é€šè¿‡ä¾èµ–æ³¨å…¥çš„æ–¹å¼ï¼Œå­˜å‚¨ç›¸åº”çš„XxxGetxControllerï¼›å·²ç»è„±ç¦»äº†InheritedWidgeté‚£ä¸€å¥—ç©æ³•ï¼Œè‡ªå·±æ‰‹åŠ¨å»ç®¡ç†è¿™äº›å®ä¾‹ï¼Œä½¿ç”¨åœºæ™¯è¢«å¤§å¤§æ‹“å±•

ç®€å•çš„æ€è·¯ï¼Œå´èƒ½äº§ç”Ÿæ·±è¿œçš„å½±å“ï¼šä¼˜é›…çš„è·¨é¡µé¢åŠŸèƒ½ä¾¿æ˜¯åŸºäºè¿™ç§è®¾è®¡è€Œå®ç°çš„ã€è·å–å®ä¾‹æ— éœ€BuildContextã€GetBuilderè‡ªåŠ¨åŒ–çš„å¤„ç†åŠå…¶å‡å°‘äº†å…¥å‚ç­‰ç­‰
2. è·¨é¡µé¢äº¤äº’
    è¿™ç»å¯¹æ˜¯GetXçš„ä¸€ä¸ªä¼˜ç‚¹ï¼å¯¹äºå¤æ‚çš„ç”Ÿäº§ç¯å¢ƒï¼Œè·¨é¡µé¢äº¤äº’çš„åœºæ™¯ï¼Œå®åœ¨å¤ªå¸¸è§äº†ï¼ŒGetXçš„è·¨é¡µé¢äº¤äº’ï¼Œå®ç°çš„ä¹Ÿè¾ƒä¸ºä¼˜é›…

3. è·¯ç”±ç®¡ç†
4. å®ç°äº†å…¨å±€BuildContext
5. å›½é™…åŒ–ï¼Œä¸»é¢˜å®ç°

**Obx  GetBuilderåŒºåˆ«**

 - Obxæ˜¯é…åˆRxå“åº”å¼å˜é‡ä½¿ç”¨ã€GetBuilderæ˜¯é…åˆupdateä½¿ç”¨ï¼šè¯·æ³¨æ„ï¼Œè¿™å®Œå…¨æ˜¯ä¿©å¥—å®šç‚¹åˆ·æ–°æ§ä»¶çš„æ–¹æ¡ˆ
   - åŒºåˆ«ï¼šå‰è€…å“åº”å¼å˜é‡å˜åŒ–ï¼ŒObxè‡ªåŠ¨åˆ·æ–°ï¼›åè€…éœ€è¦ä½¿ç”¨updateæ‰‹åŠ¨è°ƒç”¨åˆ·æ–°

* GetBuilderå†…éƒ¨å®é™…ä¸Šæ˜¯å¯¹StatefulWidgetçš„å°è£…ï¼Œæ‰€ä»¥å ç”¨èµ„æºæå°

**GetxController èµ„æºæœªé‡Šæ”¾çš„åœºæ™¯**
  
* GetxControllerå¯è¢«è‡ªåŠ¨é‡Šæ”¾çš„æ¡ä»¶
  + GetPage+Get.toNameé…å¥—ä½¿ç”¨ï¼Œå¯é‡Šæ”¾
  + ç›´æ¥ä½¿ç”¨Get.toï¼Œå¯é‡Šæ”¾

* GetxControlleræ— æ³•è¢«è‡ªåŠ¨é‡Šæ”¾åœºæ™¯
  + æœªä½¿ç”¨GetXæä¾›çš„è·¯ç”±è·³è½¬ï¼šç›´æ¥ä½¿ç”¨åŸç”Ÿè·¯ç”±apiçš„è·³è½¬æ“ä½œ
  + è¿™æ ·ä¼šç›´æ¥å¯¼è‡´GetXæ— æ³•æ„ŸçŸ¥å¯¹åº”é¡µé¢GetxControllerçš„ç”Ÿå‘½å‘¨æœŸï¼Œä¼šå¯¼è‡´å…¶æ— æ³•é‡Šæ”¾

**æœ€ä¼˜è§£ æ‰‹åŠ¨è®©getxæ„ŸçŸ¥è·¯ç”±**

```
class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      ///æ­¤å¤„é…ç½®ä¸‹ï¼
      navigatorObservers: [GetXRouterObserver()],
    );
  }
}

///è‡ªå®šä¹‰è¿™ä¸ªå…³é”®ç±»ï¼ï¼ï¼ï¼ï¼ï¼
class GetXRouterObserver extends NavigatorObserver {
  @override
  void didPush(Route<dynamic> route, Route<dynamic>? previousRoute) {
    RouterReportManager.reportCurrentRoute(route);
  }

  @override
  void didPop(Route<dynamic> route, Route<dynamic>? previousRoute) async {
    RouterReportManager.reportRouteDispose(route);
  }
}
```

**Obxåˆ·æ–°æœºåˆ¶**

Obxï¼šä»£ç å¹¶ä¸å¤šï¼Œä½†æ˜¯çš†æœ‰å¦™ç”¨
* Obxç»§æ‰¿ObxWidgetï¼ŒObxWidgetå®é™…ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªStatefulWidget
* _ObxState ä¸­ä»£ç å°±æ˜¯æ ¸å¿ƒä»£ç äº† _ObxStateåˆå§‹åŒ–çš„æ—¶å€™ï¼Œä¼šå®ä¾‹åŒ–ä¸€ä¸ª RxNotifier() å¯¹è±¡ï¼Œä½¿ç”¨ _observerå˜é‡æ¥å—ï¼šè¿™ä¸ªæ“ä½œå¾ˆé‡è¦
* initStateä¸­åšäº†ä¸€ä¸ªæ¯”è¾ƒå…³é”®çš„æ“ä½œï¼Œ_observerçš„listeneræ–¹æ³•ä¸­ï¼Œå°† _updateTreeæ–¹æ³•ä¼ è¿›å»äº†ï¼Œè¿™ä¸ªæ–¹æ³•ä¸­çš„é€»è¾‘ä½“å°±æ˜¯ setState()

```
class _ObxState extends State<ObxWidget> {
  RxInterface? _observer;
  late StreamSubscription subs;

  _ObxState() {
    _observer = RxNotifier();
  }

  @override
  void initState() {
    subs = _observer!.listen(_updateTree, cancelOnError: false);
    super.initState();
  }

  void _updateTree(_) {
    if (mounted) {
      setState(() {});
    }
  }
}
```

---

### 4ï¸âƒ£ å¦‚ä½•è®¾è®¡ä¸€ä¸ªå›¾ç‰‡ç¼“å­˜ç³»ç»Ÿï¼Œå‡å°‘é‡å¤åŠ è½½ï¼Ÿ

**è€ƒç‚¹ï¼š**
* æœ¬åœ°ç¼“å­˜ç­–ç•¥ + LRU ç®¡ç†  
**ç­”æ¡ˆï¼š**  

> ä¼˜å…ˆå†…å­˜ç¼“å­˜ï¼ˆMap/LRUï¼‰ï¼Œå‘½ä¸­å¤±è´¥å†æŸ¥æœ¬åœ°æ–‡ä»¶æˆ–ç½‘ç»œï¼›ä¸‹è½½åå¼‚æ­¥å†™å…¥æ–‡ä»¶ç³»ç»Ÿï¼Œå‘½ä¸­ç‡é«˜æ—¶æ˜¾è‘—æé€Ÿã€‚

---

### 5ï¸âƒ£ Flutter å¦‚ä½•è®¾è®¡å…¨å±€å¼‚å¸¸æ•è·ï¼Ÿ

**è€ƒç‚¹ï¼š**
* runZonedGuarded / FlutterError.onError  
**ç­”æ¡ˆï¼š**  

> ä½¿ç”¨ `runZonedGuarded` æ•è·å¼‚æ­¥å¼‚å¸¸ï¼Œ `FlutterError.onError` æ•è· UI å±‚é”™è¯¯ï¼›ç»Ÿä¸€ä¸ŠæŠ¥æˆ–è®°å½•æ—¥å¿—é˜²æ­¢å´©æºƒã€‚

---
